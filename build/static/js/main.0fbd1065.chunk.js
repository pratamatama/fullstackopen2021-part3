(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{40:function(e,n,t){},41:function(e,n,t){"use strict";t.r(n);var c=t(16),r=t.n(c),o=t(3),a=t(1),u=t(0),i=function(e){var n=e.label,t=e.value,c=e.onChange;return Object(u.jsxs)("div",{children:[n,": ",Object(u.jsx)("input",{value:t,onChange:c})]})},s=function(e){var n=e.nameValue,t=e.onNameChange,c=e.numberValue,r=e.onNumberChange,o=e.onSubmit;return Object(u.jsxs)("form",{onSubmit:o,children:[Object(u.jsx)(i,{label:"name",value:n,onChange:t}),Object(u.jsx)(i,{label:"number",value:c,onChange:r}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{type:"submit",children:"add"})})]})},l=function(e){var n=e.person,t=e.onDelete;return Object(u.jsxs)("p",{children:[n.name," ",n.number," \xa0",Object(u.jsx)("button",{onClick:t,children:"delete"})]})},b=function(e){var n=e.persons,t=e.onDelete;return Object(u.jsx)("div",{children:n.map((function(e){return Object(u.jsx)(l,{person:e,onDelete:function(){return t(e)}},e.name)}))})},f=t(4),d=t.n(f),j="/api/persons",h={getAll:function(){return d.a.get(j).then((function(e){return e.data}))},create:function(e){return d.a.post(j,e).then((function(e){return e.data}))},update:function(e,n){return d.a.put("".concat(j,"/").concat(e),n).then((function(e){return e.data}))},destroy:function(e){return d.a.delete("".concat(j,"/").concat(e)).then((function(e){return e.data}))}},m=function(e){var n=e.message,t=e.isSuccess?"notifications notifications-success":"notifications notifications-error";return Object(u.jsx)("div",{className:t,children:Object(u.jsx)("p",{className:"notifications__message",children:n})})},O=function(){var e=Object(a.useState)([]),n=Object(o.a)(e,2),t=n[0],c=n[1],r=Object(a.useState)(""),l=Object(o.a)(r,2),f=l[0],d=l[1],j=Object(a.useState)(""),O=Object(o.a)(j,2),p=O[0],v=O[1],x=Object(a.useState)(""),g=Object(o.a)(x,2),w=g[0],C=g[1],S=Object(a.useState)(""),k=Object(o.a)(S,2),N=k[0],y=k[1],D=Object(a.useState)(!1),L=Object(o.a)(D,2),V=L[0],A=L[1],I=Object(a.useState)(!0),T=Object(o.a)(I,2),E=T[0],J=T[1],P=t.filter((function(e){return e.name.toLowerCase().includes(w.toLowerCase())}));Object(a.useEffect)((function(){h.getAll().then((function(e){return c(e)})).catch((function(e){return console.error(e)}))}),[]);var _=function(){d(""),v("")},B=function(){h.create({name:f,number:p}).then((function(e){c(t.concat(e)),_(),y("Added ".concat(e.name)),J(!0),A(!0),setTimeout((function(){return A(!1)}),3e3)})).catch((function(e){return console.error(e)}))},U=function(e){window.confirm("".concat(e.name," is already added to phonebook, replace old number with a new one?"))&&h.update(e.id,{name:f,number:p}).then((function(n){c(t.map((function(t){return t.id!==e.id?t:n}))),_(),y("Updated ".concat(n.name)),J(!0),A(!0),setTimeout((function(){return A(!1)}),3e3)})).catch((function(e){return console.error(e)}))};return Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{children:"Phonebook"}),V&&Object(u.jsx)(m,{message:N,isSuccess:E}),Object(u.jsx)(i,{label:"filter shown with",value:w,onChange:function(e){return C(e.target.value)}}),Object(u.jsx)("h2",{children:"add a new"}),Object(u.jsx)(s,{nameValue:f,onNameChange:function(e){return d(e.target.value)},numberValue:p,onNumberChange:function(e){return v(e.target.value)},onSubmit:function(e){if(e.preventDefault(),!f||!p)return alert("Please fill all the field");var n=t.findIndex((function(e){return e.name.toLowerCase()===f.toLowerCase()}));-1===n?B():U(t[n])}}),Object(u.jsx)("h2",{children:"Numbers"}),Object(u.jsx)(b,{persons:P,onDelete:function(e){window.confirm("Delete ".concat(e.name," ?"))&&h.destroy(e.id).then((function(n){return c(t.filter((function(n){return n.id!==e.id})))})).catch((function(n){console.error(n),y("Information of ".concat(e.name," has already been removed from server")),J(!1),A(!0),setTimeout((function(){return A(!1)}),3e3)}))}})]})};t(40);r.a.render(Object(u.jsx)(O,{}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.0fbd1065.chunk.js.map